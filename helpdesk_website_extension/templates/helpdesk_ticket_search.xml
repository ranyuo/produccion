<odoo>

    <template id="helpdesk_ticket_search_page" name="Helpdesk Ticket Search Page">
        <t t-call="website.layout">
            <div class="container mt-4">
                <h1 class="text-center">Estado de tu expediente</h1>

                <form action="/helpdesk-ticket-search" method="get" class="mb-4">
                    <div class="input-group">
                        <input type="text" name="search" class="form-control"
                               placeholder="# de expediente"
                               t-att-value="search"/>
                        <button type="submit" class="btn btn-primary"><i class="fa fa-search" /> Buscar</button>
                    </div>
                </form>

                <t t-if="helpdesk_ticket">
                    <div class="table-responsive">
                        <div class="d-flex justify-content-end mb-2 gap-2">
                            <a class="btn btn-secondary"
                               t-att-href="'/helpdesk-ticket/%s/print' % helpdesk_ticket.id"
                               target="_blank">
                                <i class="fa fa-print"/> Imprimir
                            </a>
                            <a class="btn btn-secondary"
                               t-att-href="'/helpdesk-ticket/%s/pdf' % helpdesk_ticket.id"
                               target="_blank">
                                <i class="fa fa-download"/> Descargar PDF
                            </a>
                        </div>
                        <table class="table table-striped caption-top">
                            <caption>Datos generales</caption>
                            <tbody>
                                <tr>
                                    <th>N° Expediente</th>
                                    <td><t t-esc="helpdesk_ticket.ticket_ref or ''"/></td>
                                    <th class="text-end">Fecha de ingreso</th>
                                    <td class="text-end"><t t-esc="helpdesk_ticket.create_date.strftime('%d/%m/%Y') or ''"/></td>
                                    <th class="text-end">Situación Actual</th>
                                    <td class="text-end"><t t-esc="helpdesk_ticket.stage_id.name or ''"/></td>
                                </tr>
                                <tr>
                                    <th>Nombre/Razón social</th>
                                    <td colspan="5"><t t-esc="helpdesk_ticket.partner_id.name or ''"/></td>
                                </tr>
                                <tr>
                                    <th>Nombre trámite</th>
                                    <td colspan="5"><t t-esc="helpdesk_ticket.name or ''"/></td>
                                </tr>
                                <tr>
                                    <th>Descripción</th>
                                    <td colspan="5"><t t-esc="helpdesk_ticket.description or ''"/></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </t>
                <t t-else="">
                    <p>No se encontraron documentos.</p>
                </t>
            </div>
        </t>
    </template>

    <template id="helpdesk_ticket_print_page" name="Helpdesk Ticket Print Page">
        <t t-call="website.layout">
            <t t-set="title">Impresión de expediente</t>
            <t t-set="hide_header">True</t>
            <t t-set="hide_footer">True</t>
            <div class="container mt-4">
                <div class="text-center mb-4">
                    <h1>Expediente #<t t-esc="helpdesk_ticket.ticket_ref or ''"/></h1>
                </div>
                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <th style="width: 35%;">N° Expediente</th>
                            <td><t t-esc="helpdesk_ticket.ticket_ref or ''"/></td>
                        </tr>
                        <tr>
                            <th>Fecha de ingreso</th>
                            <td><t t-esc="helpdesk_ticket.create_date.strftime('%d/%m/%Y') or ''"/></td>
                        </tr>
                        <tr>
                            <th>Situación Actual</th>
                            <td><t t-esc="helpdesk_ticket.stage_id.name or ''"/></td>
                        </tr>
                        <tr>
                            <th>Nombre/Razón social</th>
                            <td><t t-esc="helpdesk_ticket.partner_id.name or ''"/></td>
                        </tr>
                        <tr>
                            <th>Nombre trámite</th>
                            <td><t t-esc="helpdesk_ticket.name or ''"/></td>
                        </tr>
                        <tr>
                            <th>Descripción</th>
                            <td><t t-esc="helpdesk_ticket.description or ''"/></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <t t-set="website_scripts" t-value="(website_scripts or '') + '\n&lt;script&gt;window.addEventListener(\'load\', function(){ window.print(); });&lt;/script&gt;'"/>
        </t>
    </template>

    <template id="report_helpdesk_ticket_pdf_document" name="Helpdesk Ticket PDF Document">
        <t t-call="web.basic_layout">
            <t t-foreach="docs" t-as="doc">
                <div class="page">
                    <h2 style="text-align:center;">Expediente #<span t-esc="doc.ticket_ref or ''"/></h2>
                    <table class="table table-sm o_main_table" style="width:100%; margin-top:16px;">
                        <tbody>
                            <tr>
                                <th style="text-align:left; padding:4px; width:35%;">N° Expediente</th>
                                <td style="padding:4px;">
                                    <span t-esc="doc.ticket_ref or ''"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="text-align:left; padding:4px;">Fecha de ingreso</th>
                                <td style="padding:4px;">
                                    <span t-esc="(doc.create_date and doc.create_date.strftime('%d/%m/%Y')) or ''"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="text-align:left; padding:4px;">Situación Actual</th>
                                <td style="padding:4px;">
                                    <span t-esc="doc.stage_id.name or ''"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="text-align:left; padding:4px;">Nombre/Razón social</th>
                                <td style="padding:4px;">
                                    <span t-esc="doc.partner_id.name or ''"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="text-align:left; padding:4px;">Nombre trámite</th>
                                <td style="padding:4px;">
                                    <span t-esc="doc.name or ''"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="text-align:left; padding:4px;">Descripción</th>
                                <td style="padding:4px;">
                                    <span t-esc="doc.description or ''"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </t>
        </t>
    </template>

</odoo>
